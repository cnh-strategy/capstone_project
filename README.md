# 매크로 에이전트 돌리기 위해서: agents 폴더 밑에 dump_keys.py를 생성 후 
# CAPSTONE_OPENAI_API='키값'
# 이 한 줄을 넣은 파일을 만들어주세요!!
# .env가 안먹혀서 임시로 연결해두었습니다ㅠㅠㅠ


# 🧠 AI Stock Debate System (MVP)

> **신뢰도 기반 Revise를 수행하는 AI 주식 토론 시스템**

## 📋 프로젝트 개요

3개의 전문 AI 에이전트가 주식에 대해 토론하고, 신뢰도 기반으로 의견을 수정하여 최종 예측을 도출하는 시스템입니다.

### 🎯 핵심 기능
- **3개 전문 에이전트**: Fundamental, Technical, Sentimental 분석가
- **신뢰도 기반 Revise**: 각 에이전트의 불확실성(σ)을 기반으로 가중치 계산
- **실시간 대시보드**: Streamlit을 통한 인터랙티브 시각화
- **실시간 주가 연동**: Yahoo Finance API를 통한 현재가 정보

## 🏗️ 시스템 아키텍처

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ FundamentalAgent│    │ TechnicalAgent  │    │ SentimentalAgent│
│   (보수적)      │    │   (공격적)      │    │   (중립적)      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         └───────────────────────┼───────────────────────┘
                                 │
                    ┌─────────────────┐
                    │   DebateAgent   │
                    │  (토론 관리)    │
                    └─────────────────┘
                                 │
                    ┌─────────────────┐
                    │ Streamlit 대시보드│
                    │  (시각화)       │
                    └─────────────────┘
```

## 🚀 빠른 시작

### 1. 환경 설정
```bash
pip install -r requirements.txt
```

### 2. Streamlit 대시보드 실행
```bash
streamlit run streamlit_dashboard.py
```

### 3. 토론 실행
1. 사이드바에서 종목 티커 입력 (예: AAPL, TSLA, NVDA)
2. 라운드 수 설정 (1-5)
3. "■ 토론 시작" 버튼 클릭

## 🎭 에이전트 소개

### 📊 FundamentalAgent (펀더멘털 분석가)
- **특징**: 보수적, 재무제표 기반 분석
- **예측 범위**: ±5%
- **분석 요소**: P/E, P/B, ROE, 부채비율 등

### 📈 TechnicalAgent (기술적 분석가)
- **특징**: 공격적, 차트 패턴 분석
- **예측 범위**: ±15%
- **분석 요소**: 이동평균, RSI, MACD, 볼린저밴드 등

### 💭 SentimentalAgent (센티멘탈 분석가)
- **특징**: 중립적, 시장 심리 분석
- **예측 범위**: ±10%
- **분석 요소**: 뉴스, 소셜미디어, 시장 분위기 등

## 🔄 토론 프로세스

### Round 0: 초기 의견 생성
각 에이전트가 독립적으로 주식 분석 및 예측 수행

### Round 1-N: 토론 및 수정
1. **Rebuttal**: 다른 에이전트의 의견에 대한 반박/지지
2. **Revise**: 신뢰도 기반으로 자신의 의견 수정
3. **Ensemble**: 최종 예측가 계산

### 신뢰도 계산 공식
```
β_i = (1/σ_i) / Σ(1/σ_j)
revised_price = β_i × my_price + (1-β_i) × weighted_others
```

## 📊 대시보드 기능

### 🎯 주요 탭
- **최종의견 표**: 각 에이전트의 최종 예측가와 근거
- **투자의견 표**: 라운드별 의견 변화 상세 내역
- **최종 예측 비교**: 에이전트별 예측가 막대차트
- **라운드별 의견 변화**: 시간에 따른 예측가 변화 추이
- **반박/지지 패턴**: 에이전트 간 상호작용 분석

### 📈 시각화 기능
- 실시간 주가 차트 (7일)
- 에이전트별 예측가 비교
- 라운드별 의견 변화 추이
- 반박/지지 패턴 분석

## 🛠️ 기술 스택

- **AI/ML**: PyTorch, Transformers
- **데이터**: Yahoo Finance API, yfinance
- **시각화**: Streamlit, Plotly
- **언어**: Python 3.10+

## 📁 프로젝트 구조

```
├── agents/
│   ├── base_agent.py          # 기본 에이전트 클래스
│   ├── debate_agent.py        # 토론 관리 에이전트
│   ├── fundamental_agent.py   # 펀더멘털 분석가
│   ├── technical_agent.py     # 기술적 분석가
│   └── sentimental_agent.py    # 센티멘탈 분석가
├── config/
│   └── agents.py             # 에이전트 설정
├── core/
│   ├── data_set.py           # 데이터셋 관리
│   └── evaluation.py         # 평가 메트릭
├── data/                     # 데이터 저장소
├── models/                   # 학습된 모델
├── prompts.py               # LLM 프롬프트
├── streamlit_dashboard.py   # 메인 대시보드
└── requirements.txt         # 의존성 패키지
```

## 🎯 주요 특징

### ✨ MVP 완성
- 신뢰도 기반 Revise 알고리즘 구현
- 3개 전문 에이전트 완전 구현
- 실시간 대시보드 완성

### 🔬 과학적 접근
- 불확실성(uncertainty) 기반 신뢰도 계산
- 베이지안 접근법을 통한 의견 수정
- 앙상블 학습을 통한 예측 정확도 향상

### 🎨 사용자 경험
- 직관적인 Streamlit 인터페이스
- 실시간 진행 상황 표시
- 인터랙티브 차트 및 시각화

## 🚀 향후 계획

- [ ] 더 많은 에이전트 추가 (Quantitative, ESG 등)
- [ ] 백테스팅 기능 추가
- [ ] 모바일 앱 개발
- [ ] API 서비스 제공

## 📞 문의

프로젝트에 대한 문의사항이 있으시면 이슈를 등록해주세요.

---

**🎉 MVP 모델 완료! 신뢰도 기반 Revise 수행으로 정확한 주식 예측을 경험해보세요!**